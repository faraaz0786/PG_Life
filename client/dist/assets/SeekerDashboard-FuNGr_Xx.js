import{x as h,r as g,j as e,L as c,S as j,H as u,Z as p,_ as k,E as y}from"./vendor-sH-yV7sT.js";import{m as w}from"./favorites-DJNQdwZb.js";import{m as S}from"./bookings-BF9ojx4j.js";import{u as A}from"./index-CUPUJmJk.js";import{L as q}from"./ListingCard-D2sRqQ5s.js";function o({icon:t,label:i,value:l,hint:a}){return e.jsxs("div",{className:"card p-5 flex items-center gap-3",children:[e.jsx("div",{className:"h-11 w-11 rounded-xl bg-indigo-600/10 text-indigo-600 dark:text-indigo-300 grid place-items-center",children:e.jsx(t,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[22px] font-extrabold leading-6",children:l}),e.jsx("div",{className:"text-[12px] text-slate-500 dark:text-slate-400",children:i})]}),a&&e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:a})]})}function v({title:t,action:i}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:t}),i]})}function N({icon:t,title:i,desc:l,cta:a}){return e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 rounded-2xl grid place-items-center bg-slate-100 dark:bg-slate-800 text-slate-500 mb-3",children:e.jsx(t,{size:22})}),e.jsx("h3",{className:"text-lg font-semibold",children:i}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:l}),a&&e.jsx("div",{className:"mt-4",children:a})]})}function M(){var x;const{user:t}=A(),i=h({queryKey:["favs"],queryFn:w}),l=h({queryKey:["bookings"],queryFn:S}),a=Array.isArray(i.data)?i.data:[],r=Array.isArray(l.data)?l.data:[],b=g.useMemo(()=>r.filter(s=>s.status==="requested"),[r]),f=g.useMemo(()=>r.filter(s=>s.status==="accepted"),[r]);return e.jsxs("div",{className:"container-max section space-y-8",children:[e.jsxs("div",{className:"card relative overflow-hidden p-6 md:p-8",children:[e.jsx("div",{className:"absolute -top-24 -right-24 h-64 w-64 rounded-full bg-indigo-500/20 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 h-64 w-64 rounded-full bg-cyan-500/10 blur-3xl"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"text-xs uppercase tracking-wider text-indigo-600 dark:text-indigo-300 font-semibold",children:["Welcome",t!=null&&t.name?`, ${t.name.split(" ")[0]}`:""," ðŸ‘‹"]}),e.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold tracking-tight mt-1",children:"Your Seeker Dashboard"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mt-1",children:"Pick up where you left off â€” check favourites, track bookings, and discover recommended PGs."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsxs(c,{to:"/search",className:"btn btn-primary",children:[e.jsx(j,{size:16})," Explore PGs"]}),e.jsx(c,{to:"/search?roomType=single",className:"btn",children:"Single Rooms"}),e.jsx(c,{to:"/search?roomType=twin",className:"btn",children:"Twin Sharing"})]})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(o,{icon:u,label:"Favourites",value:a.length}),e.jsx(o,{icon:p,label:"Visits Requested",value:b.length}),e.jsx(o,{icon:k,label:"Accepted Visits",value:f.length}),e.jsx(o,{icon:y,label:"Avg. Budget Match",value:Math.round((((x=a.slice(0,1)[0])==null?void 0:x.price)||6500)/1e3)+"k",hint:"approx."})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsx(v,{title:"My Favourites",action:e.jsx(c,{to:"/search",className:"text-sm text-indigo-600 dark:text-indigo-400 hover:underline",children:"Find more"})}),i.isFetching?e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:8}).map((s,d)=>e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"skeleton h-32 w-full mb-3"}),e.jsx("div",{className:"skeleton h-4 w-2/3 mb-2"}),e.jsx("div",{className:"skeleton h-3 w-1/2"})]},d))}):a.length===0?e.jsx(N,{icon:u,title:"No favourites yet",desc:"Shortlist PGs you love, and theyâ€™ll show up here.",cta:e.jsxs(c,{to:"/search",className:"btn btn-primary",children:[e.jsx(j,{size:16})," Browse PGs"]})}):e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(s=>e.jsx(q,{item:s},s._id))})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsx(v,{title:"My Bookings / Visit Requests"}),l.isFetching?e.jsx("div",{className:"grid gap-3",children:Array.from({length:5}).map((s,d)=>e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"skeleton h-4 w-1/2 mb-2"}),e.jsx("div",{className:"skeleton h-3 w-1/3 mb-2"}),e.jsx("div",{className:"skeleton h-8 w-28"})]},d))}):r.length===0?e.jsx(N,{icon:p,title:"No bookings yet",desc:"Once you request a visit, youâ€™ll see the status here.",cta:e.jsx(c,{to:"/search",className:"btn",children:"Book a visit"})}):e.jsx("div",{className:"grid gap-3",children:r.map(s=>{var m;const d=s.status==="accepted"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":s.status==="declined"?"bg-rose-100 text-rose-700 dark:bg-rose-900/40 dark:text-rose-300":"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",n=s.listing||s.listingId||{};return e.jsxs("div",{className:"card p-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((m=n.images)==null?void 0:m[0])||"https://images.unsplash.com/photo-1505691723518-36a5ac3b2aa5?q=80&w=1600&auto=format&fit=crop",alt:n.title||"PG",className:"h-14 w-20 rounded-lg object-cover",loading:"lazy",decoding:"async"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold line-clamp-1",children:n.title||"PG"}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[n.city||"â€”"," â€¢ ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsx("span",{className:`badge ${d} capitalize`,children:s.status})]},s._id)})})]})]})}export{M as default};
