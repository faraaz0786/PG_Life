import{b as R,r,j as e,W as I,l as U,K as k,O as F,V as G,Y as T,B as D,L as H,z as C}from"./vendor-sH-yV7sT.js";import{u as M,a as V}from"./index-CUPUJmJk.js";import{A as W,m as t,F as m}from"./FieldIcon-IVW3Tmbp.js";const l={hidden:{y:10,opacity:0},show:(u=0)=>({y:0,opacity:1,transition:{delay:.04+u*.05,type:"spring",stiffness:160,damping:18}})};function J(){const u=R(),{login:x}=M()||{},[c,S]=r.useState(""),[d,E]=r.useState(""),[o,A]=r.useState(""),[h,$]=r.useState(""),[p,z]=r.useState(!1),[b,f]=r.useState("seeker"),[j,B]=r.useState(!1),[g,N]=r.useState(!1),[a,L]=r.useState({}),i=()=>{const s={};return c.trim().length<2&&(s.name="Enter your full name"),/^\S+@\S+\.\S+$/.test(d)||(s.email="Enter a valid email"),o.length<6&&(s.password="Min 6 chars"),h!==o&&(s.confirm="Passwords do not match"),j||(s.agree="Accept Terms & Privacy"),L(s),Object.keys(s).length===0},P=async s=>{var v,w,y;if(s.preventDefault(),!!i())try{N(!0);const{data:n}=await V.post("/api/auth/signup",{name:c,email:d,password:o,role:b});localStorage.setItem("token",n.token),x==null||x({token:n.token,user:n.user}),C.success("Account created!");const O=((v=n.user)==null?void 0:v.role)==="owner"?"/owner":"/dashboard";u(O,{replace:!0})}catch(n){C.error(((y=(w=n==null?void 0:n.response)==null?void 0:w.data)==null?void 0:y.message)||"Could not create account")}finally{N(!1)}};return e.jsx(W,{heroTitle:"Welcome",heroCopy:"Create your account and start exploring PGs tailored to your budget and preferences.",title:"Create your account",subtitle:e.jsxs("span",{children:["Already a member?"," ",e.jsx(H,{to:"/login",className:"text-brand-700 dark:text-brand-400 hover:underline",children:"Login"})]}),children:e.jsxs(t.form,{className:"auth-form space-y-3",onSubmit:P,initial:"hidden",animate:"show",children:[e.jsxs(t.div,{className:"field",variants:l,custom:0,children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:`input pl-12 ${a.name?"border-red-400 focus:ring-red-400 focus:border-red-400":""}`,placeholder:"Alex Doe",value:c,onChange:s=>S(s.target.value),onBlur:i,autoComplete:"name"}),e.jsx(m,{show:!c,children:e.jsx(I,{className:"h-5 w-5"})})]}),a.name&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:a.name})]}),e.jsxs(t.div,{className:"field",variants:l,custom:1,children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:`input pl-12 ${a.email?"border-red-400 focus:ring-red-400 focus:border-red-400":""}`,type:"email",placeholder:"you@example.com",value:d,onChange:s=>E(s.target.value),onBlur:i,autoComplete:"email"}),e.jsx(m,{show:!d,children:e.jsx(U,{className:"h-5 w-5"})})]}),a.email&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:a.email})]}),e.jsxs(t.div,{className:"field",variants:l,custom:2,children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:`input pr-10 pl-12 ${a.password?"border-red-400 focus:ring-red-400 focus:border-red-400":""}`,type:p?"text":"password",placeholder:"Create a strong password",value:o,onChange:s=>A(s.target.value),onBlur:i,autoComplete:"new-password"}),e.jsx(m,{show:!o,children:e.jsx(k,{className:"h-5 w-5"})}),e.jsx("button",{type:"button",className:"absolute right-2 top-2.5 text-slate-500 hover:text-slate-300",onClick:()=>z(s=>!s),"aria-label":p?"Hide password":"Show password",children:p?e.jsx(F,{size:18}):e.jsx(G,{size:18})})]}),e.jsx("p",{className:"hint text-[11px] text-slate-500 mt-1",children:"Use at least 6 characters."}),a.password&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:a.password})]}),e.jsxs(t.div,{className:"field",variants:l,custom:3,children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirm password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:`input pl-12 ${a.confirm?"border-red-400 focus:ring-red-400 focus:border-red-400":""}`,type:"password",placeholder:"Re-enter password",value:h,onChange:s=>$(s.target.value),onBlur:i,autoComplete:"new-password"}),e.jsx(m,{show:!h,children:e.jsx(k,{className:"h-5 w-5"})})]}),a.confirm&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:a.confirm})]}),e.jsxs(t.div,{className:"field",variants:l,custom:4,children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"I am a"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",className:`btn ${b==="seeker"?"btn-primary":""}`,onClick:()=>f("seeker"),children:[e.jsx(T,{size:16})," Seeker"]}),e.jsxs("button",{type:"button",className:`btn ${b==="owner"?"btn-primary":""}`,onClick:()=>f("owner"),children:[e.jsx(D,{size:16})," Owner"]})]})]}),e.jsxs(t.label,{className:"field flex items-center gap-2 text-sm",variants:l,custom:5,children:[e.jsx("input",{type:"checkbox",className:"accent-brand-600",checked:j,onChange:s=>B(s.target.checked)}),"I agree to the ",e.jsx("a",{className:"underline decoration-dotted",href:"#",children:"Terms"})," &"," ",e.jsx("a",{className:"underline decoration-dotted",href:"#",children:"Privacy"})]}),a.agree&&e.jsx("p",{className:"text-xs text-red-500 -mt-2",children:a.agree}),e.jsx(t.button,{type:"submit",className:"btn btn-primary w-full h-11",disabled:g,variants:l,custom:6,children:g?"Creating accountâ€¦":"Sign Up"}),e.jsxs("div",{className:"auth-social",children:[e.jsxs(t.div,{className:"flex items-center gap-3 text-xs text-slate-500 mt-3",variants:l,custom:7,children:[e.jsx("div",{className:"h-px flex-1 bg-slate-200 dark:bg-slate-800"}),"Or continue with",e.jsx("div",{className:"h-px flex-1 bg-slate-200 dark:bg-slate-800"})]}),e.jsxs(t.div,{className:"grid grid-cols-2 gap-3 mt-3",variants:l,custom:8,children:[e.jsx("button",{type:"button",disabled:!0,className:"btn w-full",children:"Google"}),e.jsx("button",{type:"button",disabled:!0,className:"btn w-full",children:"GitHub"})]})]})]})})}export{J as default};
